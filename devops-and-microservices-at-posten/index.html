<!doctype html>
<!-- vim: set tabstop=4 softtabstop=4 shiftwidth=4 noexpandtab: -->
<!-- vim: set foldexpr=SectionFold(v\:lnum) : -->
<!-- vim: set foldcolumn=5 foldlevel=99 foldmethod=expr : -->

<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>DevOps og Micro Services hos Posten</title>

		<meta name="description" content="DevOps og Micro Services hos Posten">
		<meta name="author" content="Stian Mathiassen and J√∏ran Lillesand">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<!--
		<link rel="stylesheet" href="css/theme/black.css" id="theme">
		-->
		<link rel="stylesheet" href="css/theme/bekk.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

		<style>
			.reveal section img {
				border: none;
			}

			section .header {
				position: relative;
				background-color: black;
			}

			section .header h2 {
				padding: 10px;
			}

			section .header .caption {
				position: absolute;
				font-size: 20px;
				text-align: left;
				background-color:inherit;
				top: -24px;
				padding: 2px 10px;
			}

		</style>
	</head>

	<body>

		<div class="reveal">

			<div class="slides">
				<section id="intro-speakers" data-owner="j√∏ran" data-time="1">
					<section>
						<h1>DevOps og mikrotjenester hos Posten og Bring!</h1>
					</section>

					<section>
						<h1>Hvem er vi?</h1>
						<div style="clear:both"></div>

						<div style="width: 49%; float: left;">
							<img src="img/bekk-stian.png" />
							<p class="">Stian</p>
						</div>
						<div style="width: 49%; float: left;" class="fragment">
							<img src="img/bekk-joran.png" />
							<p class="">J√∏ran</p>
						</div>

						<aside class="notes">
							<ul>
								<li>Til sammen 12 √•r p√• Posten</li>
								<li>Stian 5</li>
								<li>J√∏ran 7</li>
								<li>Stian har jobbet mye med det tekniske og er kongen bak innf√∏ring</li>
								<li>J√∏ran er stor i kjeften og ser mye p√• hvorfor og hvilke effekter det gir</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="intro" data-owner="j√∏ran" data-time="4">
					<section data-background-video="img/sortering.mp4" data-background-video-loop>
						<h2 style="background-color: #e32d22; color: white; padding: 10px; width: auto;">
							IT i Posten
						</h2>

						<aside class="notes">
							<ul>
								<li>Sorteringmaskin for brev, 80 000 brev i timen per robot</li>
								<li>Posten er en IT-virksomhet som driver med Logistikk</li>
								<li>All produksjon er IT-styrt</li>
							</ul>
						</aside>
					</section>

					<section data-background-image="img/bring-web-team.jpg">
						<h2 style="background-color: #7bc144; color: white; padding: 10px;">
							Bring Web Team
						</h2>

						<aside class="notes">
							<ul>
								<li>Sped begynnelse i 2008.</li>
								<li>J√∏ran rett ut fra NTNU som f√∏rste utvikler. Designet sv√¶rt databaseskjema.</li>
								<li>Premisset for teamet: smidig! Endre m√•ten Posten gj√∏r software p√•.</li>
							</ul>
						</aside>
					</section>
				</section>

				<section data-owner="stian" data-time="7">
					<section>
						<h1>Hva lager vi?</h1>

						<aside class="notes">
							<ul>
								<li>Gi dere en ide om hva vi snakker om</li>
								<li>Dette er ikke et rent tech-milj√∏, men forretningskritiske systemer.</li>
							</ul>
						</aside>
					</section>

					<section data-owner="stian" data-background-image="img/sporing.png" data-background-position="top">
						<aside class="notes">
							<ul>
								<li>Mest kjente l√∏sningen</li>
								<li>Tipper dere alle har brukt</li>
								<li>En mill sporinger per dag</li>
								<li>50 000 pushmeldinger i d√∏gnet</li>
								<li>Veldig viktig app for Posten/Bring</li>
							</ul>
						</aside>
					</section>

					<section data-owner="stian" data-background-image="img/booking.png" data-background-position="top">
						<aside class="notes">
							<ul>
								<li>I starten ca 5000 kr i uka</li>
								<li>Over 30 000 bestillinger i uka</li>
								<li>Flere hundre millioner i omsetning i √•ret</li>
								<li>Begynt √• bli veldig viktig</li>
								<li>Helt kaos om g√•r ned</li>
								<li>Veldig mange sm√•kunder</li>
							</ul>
						</aside>
					</section>

					<section data-owner="stian" data-background-image="img/developer.png" data-background-position="top">
						<aside class="notes">
							<ul>
								<li>API er blitt viktig forretningsomr√•det</li>
								<li>Knytter kundene tettere til seg</li>
								<li>Stor verdi for kunder av Bring</li>
							</ul>
						</aside>
					</section>

					<section data-owner="stian" data-background-image="img/fraktguide.png" data-background-position="top">
						<aside class="notes">
							<ul>
								<li>Viktigste API-et</li>
								<li>Brukes av veldig mange nettbutikker</li>
								<li>En kvart million oppslag per dag</li>
							</ul>
						</aside>
					</section>
					<section data-owner="stian" data-background-image="img/vita.png">
					</section>
				</section>


				<section data-owner="stian">
					<section>
						<h1>Hva har vi?</h1>
						<aside class="notes">
							Fang oppmerksomheten s√•nn at folk v√•kner opp.

							Vi er stolte over hvor langt vi har kommet. Full buzzword compliance:
							<ul>
								<li>Serveroppsett med Puppet</li>
								<li>nedetidsfri deployment p√• dagtid</li>
								<li>Deployer flere ganger om dagen</li>
								<li>F√• feil</li>
								<li>Automatisert overv√•kning av logger basert p√• terskelverdier</li>
								<li>Logaggregering</li>
							</ul>
						</aside>
					</section>
					<section data-owner="stian" data-background-image="img/puppet.png" data-background-position="top">
					</section>
					<section data-owner="stian" data-background-video="img/deployment.mov">
						<aside class="notes">
							<ul>
								<li>Tar seg av alt</li>
								<li>Databasemigrering</li>
								<li>Forklar nedetidsfri deploy</li>
							</ul>
						</aside>
					</section>
					<section data-owner="stian" data-background-image="img/dashboard.png" data-background-position="top">
						<aside class="notes">
							Gir oversikt over helsen p√• alle appene
						</aside>
					</section>
					<section data-owner="stian" data-background-image="img/kibana1.png" data-background-position="top">
						<aside class="notes">
							Dette er en Logstash + Elasicsearch&Kibana-stack
						</aside>
					</section>

					<!--
					<section data-owner="j√∏ran">
						<img src="img/disk_problems.png" alt="Disk problems">
					</section>
					-->


					<!--
					<section data-owner="stian">
						Vis hvor langt vi har kommet:

						* Vis Kibana
						* Vis dashboardet
						* Vis Slack med feilvarsling basert p√• terskelverdier (automatisert overv√•kning)
						* Lag screencast/video av deployment
					</section>
					-->
				</section>

				<section id="hovedpoeng-teaser" data-owner="j√∏ran" data-time="3">
					<section data-background-image="img/conclusion.jpg">
						<h2 style="background-color: black; padding: 10px;">Konklusjonen</h2>
					</section>

					<section data-slide-type="poeng">
						L√∏s problemene du faktisk har.

						<aside class="notes">
							<ul>
								<li>Ikke dra p√• presentasjoner og dra hjem og "gj√∏r DevOps"</li>
								<li>Kjenn til hva andre gj√∏r og hva som er the latest and greatest</li>
								<li>Ikke lag noe bare for √• lage det</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="hoveddel-intro" data-background-image="img/now-for-something-different.jpg" data-owner="j√∏ran">
					<h2 style="background-color: black; padding: 10px; margin-bottom: -250px;">And now for something completely different‚Ä¶</h2>

					<aside class="notes">
						<ul>
							<li>N√• kommer innholdet!</li>
							<li>Historien om leksene vi har l√¶rt</li>
							<li>Smerten vi kjent p√•, og l√∏sningene vi fant</li>
							<li>Vi mener mye av dette er relevant for alle</li>
							<li>Ikke for √• bruke direkte, men som inspirasjon og et oppslagsverk</li>
						</ul>
					</aside>
				</section>

				<section id="utfordre-premissene" data-owner="j√∏ran" data-summary="Utfordre premissene, v√¶r litt naughty" data-time="2.5">

					<section data-background="img/jcvd-volvosplitt.jpg">
						<div class="header" style="color: #B79A79">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Utfordret premisser
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Vi ville gj√∏re smidig</li>
								<li>Innkjperen v√•r ville gj√∏re smidig</li>
								<li>Organisasjonen var p√• ingen m√•te rigget for smidig</li>
							</ul>
						</aside>
					</section>

					<section>
						<h1>Smidig<span class="fragment">ish</span></h1>

						<aside class="notes">
							<ul>
								<li>Uregelmessige prodsettinger</li>
								<li>Hadde ingen tilgang til egne QA- eller prodservere</li>
								<li>Alle endringer disse milj√∏ene m√•tte bestilles gjennom et ITIL-regime</li>
								<li>Bestilte masse prodsettinger upfront og fors√∏kte √• stykke dem utover</li>
								<li>Masse problemer!</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="smerte">
						<h2>Timingen er aldri riktig</h2>

						<aside class="notes">
							<ul>
								<li>Det er alltid mye baggasje</li>
								<li>Krav om √• bruke sentralisert infrastruktur, ESB og annen dritt</li>
								<li>"S√•nn gj√∏r vi drift hos oss"</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Utfordre premissene</h2>
						<ul>
							<li>V√¶r en organisasjon i organisasjonen</li>
							<li>Eksperimenter med nye prosjekter</li>
							<li class="fragment">V√¶r litt naughty</li>
						</ul>

						<aside class="notes">
							<p>For smidig, DevOps eller mikrotjenester eller whatever. Du m√• v√¶re forberedt p√• √• ta initiativ selv.</p>

							<ul>
								<li>Rigg deg som en liten boble!</li>
								<li>Eksperimenter med nye prosjekter -> lav konsekvens</li>
								<li>Det var mange som var uenige ‚Äì da lot vi v√¶re √• forankre med alle</li>
								<li>S√∏rg for √• ha en sponsor med litt pondus!</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="devops-er-en-konsekvens-av-smidig" data-owner="j√∏ran" data-summary="Ikke gj√∏r DevOps for √• gj√∏re DevOps" data-time="3">

					<section data-background-image="img/o-rly.png">
						<div class="header" style="color: #FB8015">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Begynt med DevOps
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Suprise! Vi skal snakke litt om DevOps!</li>
								<li>Det er naturlig √• begynne historien v√•r med hvordan vi endte opp med DevOps.</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="smerte">
						<h2>Ekstern driftsorganisasjon</h2>
						<div class="fragment"><img src="img/poop.png" style="box-shadow: none" /></div>

						<aside class="notes">
							Unicode 1f4a9

							<ul>
								<li>Defin√©r ekstern driftsleverand√∏r (utenfor teamet)</li>
								<li>Sp√∏r salen: hvor mange har ekstern drift? Hvor mange fungerer det bra for? Hvor mange av disse er smidige?</li>
								<li>Vi pr√∏vde √• lykkes med ekstern drift!</li>
								<li>Roten til det vonde: ulike incentivmodeller</li>
								<li>Marginene p√• √• selge drift er kn√∏ttsm√•</li>
								<li>Fastpris -> ingen proaktivitet</li>
								<li>Men det er flinke folk!</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>DevOps</h2>

						<ul>
							<li>Ikke et m√•l i seg selv</li>
							<li>Pr√∏v √• lykkes med det du har</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Det er vanskelig √• innf√∏re DevOps! Mange organisasjoner er ikke rigget</li>
								<li>M√•let er smidighet og kontroll p√• infrastruktur</li>
								<li>DevOps er bare et virkemiddel</li>
								<li>Det handler prim√¶rt om √• sparke ned veggen mellom drift og utvikling</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>DevOps er en konsekvens<br/>av √• lykkes med smidig</h2>

						<aside class="notes">
							<ul>
								<li>Vi hadde aldri h√∏rt ordet DevOps</li>
								<li>En direkte konsekvens av noe som ikke virket</li>
								<li>Det er <b>umulig √• jobbe smidig</b> hvis utvikling og drift er <b>forskjellige organisasjoner</b></li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="start-sm√•tt" data-owner="stian" data-summary="Start med et lite eksperiment" data-time="4">
					<section data-background="img/miniature.jpg">
						<div class="header" style="color: #3281AD">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Startet sm√•tt
							</h2>
						</div>
						<aside class="notes">
							<ul>
								<li>Fikk kontroll p√• utvikling</li>
								<li>Bruker mye tid per deploy</li>
								<li>Stor appserver</li>
								<li>Bestiller egne servere</li>
								<li>V√•r f√∏rste DevOps var en applikasjon med 0 brukere</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<img src="img/404.png">
						<aside class="notes">
							<ul>
								<li>Jetty exploded war i /tmp/</li>
								<li>Fungerer n√•r vi deployer ofte</li>
								<li>Slettes hver 3. dag</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Start med minimal risiko</h2>
						<ul>
							<li>Senker konsekvensen ved feil</li>
							<li>
								Gj√∏r det lettere √• selge inn <br>
								(hva er det verste som kan skje..?)
							</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Vi begynte med helt ny/liten applikasjon</li>
								<li>Det viktigste er at kompleksiteten i applikasjonen er lav</li>
								<li>‚Ä¶ og at risikoen er lav. Folk b√∏r ikke miste jobben dersom det gj√∏res feil i starten.</li>
								<li>Du har fortsatt mye √• l√¶re!</li>
								<li>Gj√∏r det lettere √• selge og innf√∏re</li>
								<li>Lettere √• gj√∏r under radaren</li>
								<li>Ansvar for drift krever kunnskap</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="nedetidsfri-deploy" data-owner="stian" data-summary="Deploy hyppig, p√• dagtid" data-time="3">
					<section data-background="img/sunrise.jpg">
						<div class="header" style="color: #FCE677">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Deployet midt p√• dagen
							</h2>
						</div>
						<aside class="notes">
							<ul>
								<li>Begynte √• deploy oftere og oftere</li>
								<li>Inge/F√• brukere, ikke problem med litt nedetid</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<h2>Nedetid</h2>
						<p>Brukerene forventer at det alltid er oppe</p>
						<aside class="notes">
							<ul>
								<li>J√∏ran kan ikke sitte √• se n√•r folk ikke bruker appen</li>
								<li>Skalerer ikke</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Nedetidsfri deploy</h2>
						<ul>
							<li class="fragment">Folk er p√• jobb</li>
							<li class="fragment">Realistisk trafikk</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Deploy p√• dagtid. Lettere √• deploye ofte</li>
								<li>Husk: Bakoverkompabilitet, databaseskjema, sesjoner, API</li>
								<li>Alle er <b>p√• jobb</b>, i tilfelle feil</li>
								<li><b>Realistisk trafikk</b> p√• appen, vet om man m√• gj√∏r rollback</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="automatisering" data-owner="j√∏ran" data-summary="Automatiser produksjonsmilj√∏ene" data-time="3">
					<section data-background="img/automatisering.jpg">
						<div class="header" style="color: #0CADD1">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Automatisert
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Vi har automatisert masse!</li>
								<li>Bruker ruby sitt Rake (selv om vi er Java!)</li>
								<li>Selvsagt automatisert deployment.</li>
								<li>Men av og til g√•r det galt. En gang gikk det galt. Vil kunne heldigvis bare rulle tilbake‚Ä¶‚Ä¶‚Ä¶ [<b>next slide</b>]</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<pre style="margin-bottom: 30px;"><code style="font-size:30px; line-height:60px;" data-trim>
							$ be rake production:rollback
						</code></pre>


						<div class="fragment">‚Äì not implemented. perform manual rollback.</div>

						<aside class="notes">
							<ul>
								<li>Fucckk yoouuu‚Ä¶ ikke implementert</li>
								<li>Ok, null problem. Vi hadde st√∏tte for rollback</li>
								<li>Tok vare p√• gamle artifakter</li>
								<li>Brukte symlink [<b>next slide</b>]</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<h2>Manual rollback time‚Ä¶</h2>
						<pre style="margin-bottom: 30px;"><code style="font-size:30px; line-height:60px;" data-trim>
							ln -sf booking.jar booking-2.11.jar
						</code></pre>

						<pre class="fragment"><code style="font-size:30px; line-height:60px;" data-trim>
							ln -sf booking-2.11.jar booking.jar
						</code></pre>

						<aside class="notes">
							<ul>
								<li>Sp√∏r salen: hvilken er riktig?</li>
								<li>Vi aner ikke. M√• sjekke hver gang</li>
								<li>Leser manpage. Vet fortsatt ikke.</li>
								<li>Gikk p√• to s√•nne p√• kort tid!</li>
								<li>Protip: ikke bruk -sf (superfort!)</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Automatiser alt</h2>

						<ul>
							<li>Deployments</li>
							<li>Konfigurasjon</li>
							<li>Ryddejobber</li>
							<li>Engangsjobber</li>
						</ul>

						<aside class="notes">
							Eksempelet v√•rt er selvsagt ekstremt. Men automatisering gir
							<ul>
								<li>dokumentasjon (hva har faktisk blitt gjort)</li>
								<li>reproduserbarhet</li>
								<li>likhet p√• tvers av mij√∏er</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h1>Automatiser, <span class="fragment">automatiser,</span> <span class="fragment">automatiser!</span></h1>

						<aside class="notes">
							<ul>

								<li>Manuelle operasjoner er roten til mye vondt!</li>
								<li>Tar mye tid og gir mye feil</li>
								<li>Vanskelig √• reprodusere og vite hva som har skjedd</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="overv√•kning" data-owner="j√∏ran" data-summary="Etabler overv√•kning" data-time="3">
					<section data-background="img/overv√•kning.jpg" data-background-repeat="no-repeat" data-background-color="white" data-background-position="center" data-background-size="70%">

						<div class="header" style="background-color: white;">
							<div class="caption">Vi har‚Ä¶</div>
							<h2>
								Overv√•ket
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Applikasjonene blir mer og mer kritiske</li>
								<li>Stian ikke s√• glad i at vi forteller dette fordi vi h√∏res ut som n00bs. Men faen, la oss v√¶re √¶rlige.</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<img src="img/error-page.png" class="stretch" />

						<aside class="notes">

							<ul>
								<li>Blir varslet av kundeservice om at en app er nede</li>
								<li>Viser seg at den har v√¶rt nede siden kvelden f√∏r</li>
								<li>F√∏les litt som vi er de siste som vet</li>
								<li>V√•r erfaring: et n+1-problem, det g√•r alltid ned der du mangler m√•lepunkter</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Overv√•kning</h2>

						<ul>
							<li>M√•l sluttbrukertransaksjoner</li>
							<li>Automatisk helsesjekk</li>
							<li>Loggoverv√•kning basert p√• terskler</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Overv√•kning basert p√• sluttbrukertransaksjoner</li>

								<li>Viktig med flere typer overv√•kning</li>
								<li>Helsesjekker som overv√•ker, minne, diskplass, cpu-bruk, databasetilkobling og mye mye mer</li>
								<li>Overv√•k logger basert p√• terskler</li>
							</ul>
						</aside>
					</section>

				</section>

				<!--
				<section id="l√¶r-drift" data-owner="stian" data-summary="L√¶r driftsfaget">
					<section data-background="img/gears.jpg">
						<div class="header" style="color: #C66659">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								L√¶rt driftsfaget
							</h2>
						</div>
						<aside class="notes">
							<ul>
								<li>Til n√• en app</li>
								<li>Budsjett til √• migrere noen flere</li>
								<li>Drift er eget fagfelt!</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<h2>Ting tar tid</h2>
						<p>Gikk til tider p√• bekostning av annen funksjonalitet</p>
						<aside class="notes">
							<ul>
								<li>Fikk kjenne at vi ikke fulgte v√•rt eget prinsipp</li>
								<li>Flere smeller med backup, overv√•kning, hardening</li>
								<li>Mangler det man f√•r ut av boksen</li>
								<li>Bruker utviklerpraksis i drift. Tester, automatisering, verifisering</li>
								<li>Kontroll p√• at det virker</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>L√¶r drift</h2>
						<ul>
							<li>Drift er ikke s√• lett som utviklere tror</li>
							<li>√òv p√• drift</li>
						</ul>
						<aside class="notes">
							Mye √• l√¶re om drift. Du kan det antagelig ikke.
							<ul>
								<li>Sikkerhet: OS-hardening</li>
								<li>Sonemodeller</li>
								<li>Virtualisering</li>
								<li>Nettverk</li>
								<li>Backup</li>
								<li>Overv√•kning</li>
							</ul>
						</aside>
					</section>
				</section>
				-->

				<section id="devops-er-en-markedsfordel" data-owner="stian" data-summary="Demonstrer forretningsverdi" data-time="2.5">
					<section data-background="img/cashregister.jpg">
						<div class="header">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								F√•tt forretning med p√• laget
							</h2>
						</div>
						<aside class="notes">
							<ul>
								<li>Hadde kun r√•d til √• migrere noen apper</li>
								<li><b>To klasser</b> med apper oppsto, de p√• "Smidig drift" og de p√• tradisjonell</li>
								<li><b>Salg ble irritert</b>: Noen apper ute p√• 5 min, andre p√• to uker</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="smerte">
						<h2>Finansiering</h2>
						<p>Ingen vil betale, men alle vil ha</p>
						<aside class="notes">
							<ul>
								<li>Hvem skal betale?</li>
								<li><b>Salg/produkteier lei</b> av IT-oppgaver</li>
								<li>Hvorfor migrere, betaler jo allerede for drift</li>
								<li>Periode hvor IT hadde en del <b>andre oppgaver</b> i tillegg</li>
								<li><b>Chicken race</b>: Hvor lenge kan man vente f√∏r de andre betaler</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>IT-arkitektur er forretningsbehov</h2>
						<ul>
							<li>Kortere time-to-marked</li>
							<li>Retter feil fortere</li>
						</ul>
						<aside class="notes">
							S√∏rg for at forretning ser og f√•r cashet ut verdien av de tekniske forbedringene!
							<ul>
								<li><b>Solskinns-historie</b></li>
								<li>Salg/produkteiere betalte for migrering</li>
								<li><b>Forretning m√• skj√∏nne</b> hva vi gj√∏r</li>
								<li>Kortere time to marked</li>
								<li>Vis og bevis!</li>
								<li>Ingen effekt for andre enn IT? B√∏r du?</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="micro-services-the-beginning" data-owner="j√∏ran" data-summary="Lag mikrotjenester ved behov" data-time="3.5">
					<section data-background-image="img/neural-network.jpg">
						<div class="header" style="color: #E2E7CF">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Begynt med mikrotjenester
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Applikasjonene ble store</li>
								<li>Vanskelig √• beholde smidigheten</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="smerte">
						<h2>Smidig med<br>store applikasjoner</h2>
						<ul>
							<li>Mye funksjonalitet √• teste</li>
							<li>Langsom utvikling</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Vanskelig √• v√¶re smidig med store applikasjoner</li>
								<li>Krever mye retesting, ogs√• en del manuell</li>
								<li>Nyutvikling g√•r tregere og tregere</li>
								<li>Kode brekker mindre √•penbare sammenhenger</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Mikrotjenester gir <br/>effektivitet</h2>
						<ul>
							<li>Lar deg deploye ofte</li>
							<li>Senker risiko p√• endringer</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Senker risiko: splitter funksjonalitet</li>
								<li>Lettere √• deploye ofte</li>
								<li>Kan deploye mindre funksjonalitet per gang</li>
								<li>Lettere √• rulle tilbake</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>
							Mikrotjenester er<br>
							en konsekvens<br>
							av √• lykkes med DevOps
						</h2>

						<aside class="notes">
							<ul>
								<li>P√• samme m√•te som Smidig -> DevOps</li>
								<li>DevOps -> Mikrotjenester</li>
								<li>Plutselig blir st√∏rrelsen p√• applikasjoner det st√∏rste problemet</li>
							</ul>
						</aside>
					</section>

				</section>

				<!--
				<section id="la-monolitten-leve" data-owner="stian" data-summary="Og la monolitten leve" data-time="2">
					<section data-background-image="img/monolitten.jpg">
						<div class="header" style="color: #F9E9CE">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Latt monolitten leve
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Brukte <b>mye</b> tid p√• <b>√• snakke</b> om hvordan vi skulle stykke opp de store applikasjonene</li>
								<li>Endte opp med √• ikke gj√∏re det</li>
								<li>√Ö ikke levere ny funksjonalitet p√• m√•nedsvis mens du "introduserer mikrotjenester" flyr d√•rlig</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="tabbe">
						<h2>V√•r venn monolitten</h2>
						<ul>
							<li>Det er mye bra med monolitter!</li>
							<li class="fragment">‚Ä¶ men det er faen meg mye d√•rlig ogs√•</li>
						</ul>

						<aside class="notes">
							Det er ikke noe feil med monolitter i seg selv!

							<ul>
								<li>Lenge fungerte det bra med store applikasjoner</li>
								<li>Men n√•r de st√∏rre appene kom over p√• ny infrastruktur ble det verre</li>
								<li>H√∏yere hyppighet p√• deploys</li>
								<li>Stor kompleksitet i apper, vanskelig √• endre og teste</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Skap verdi f√∏rst!</h2>
						<p>
								Det er vanskelig √• splitte opp eksisterende applikasjoner<br>
								‚Ä¶ og det tilf√∏rer veldig liten verdi
						</p>

						<aside class="notes">
							Det er ikke noe feil med monolitter i seg selv!

							<ul>
								<li>Aldri hatt bare en stor app</li>
								<li>Vi l√• <b>lenge p√• 4-5</b> og vokste sakte. Mye m√•tte p√• plass f√∏r vi var klare for mange sm√•</li>
								<li>Men definitivt noen applikasjoner som fikk vokse for mye</li>
								<li>Arkitektur er ikke et m√•l i seg selv: viktig √• gradvis l√¶re seg √• drifte sm√• applikasjoner</li>
								<li>Du kan v√¶re smidig og jobbe effektivt med en (eller noen) monolitter</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>La monolitten din leve lenge</h2>

						<ul>
							<li>Skaff erfaring med mikrotjenester f√∏rst</li>
							<li>Mikro er relativt</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Bygg <b>forretning f√∏rst</b>, s√• kan teknologien komme etterhvert</li>
								<li>Monolitten din g√•r ingen plass. Kan du fikse den i dag, kan du fikse den i morgen</li>
								<li>Bli <b>god p√• mikrotjenester</b> f√∏rst</li>
								<li>Ikke la kn√∏ttsm√• applikasjoner v√¶re et poeng i seg selv</li>
								<li>√Ö <b>splitte opp</b> en eksisterende applikasjon er en <b>vanskelig</b> engineering-√∏velse</li>
							</ul>
						</aside>
					</section>
				</section>
				-->

				<section id="industrialisering" data-owner="stian" data-summary="Industrialiser infrastrukturen" data-time="3">
					<section data-background="img/cake.jpg">
						<div class="header" style="color: #F10000">
							<div class="caption">Vi har‚Ä¶</div>
							<h2 style="color: inherit;">
								Industrialisert utvikling og utrulling
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Kostnad per app ned</li>
								<li>Fikk ny type kompleksitet</li>
								<li>Mikrotjenester f√∏rer til industrialisering</li>
								<li>Mikrotjenester f√∏rer ogs√• til standariseing</li>
								<li>Viktig √• ikke bli for rigid</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="smerte">
						<img src="img/logs.png" alt="Logs across applications">
						<aside class="notes">
							<ul>
								<li>Flere og flere avhengigheter mellom appene</li>
								<li>Det ble veldig komplekst √• deploye en app.</li>
								<li>M√•tte f√∏lge med i 4 fire logger p√• 2 servere samtidig!</li>
								<li>Var vanskelig √• gj√∏re drift, for milj√∏et begynte √• bli komplekst.</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<img src="img/kibana3.png" alt="Kibana">
						<aside class="notes">
							<ul>
								<li>Aggregering av logger</li>
								<li>Forrige slide og denne er <b>samme data</b></li>
								<li>Grafer gj√∏r det lettere √• se <b>trender og spikes</b></li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>St√∏tteverkt√∏y</h2>
						<ul>
							<li>Applikasjoner blir moduler</li>
							<li>
								St√∏tte m√• gj√∏res rundt applikasjoner,<br>
								ikke inne i dem
							</li>
						</ul>

						<aside class="notes">
							<ul>
								<li><b>App = modul</b></li>
								<li>F√•r et <b>niv√• over applikasjon</b></li>
								<li>Fjerner kompleksiteten med monolitter, men introduserer en ny kompleksitet</li>
								<li>Invester mer i infrastruktur</li>
								<li>Automatiserer implisitte oppgaver</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Standardisering?</h2>

						<aside class="notes">
							<ul>
								<li>Mikrotjenester brukes som et argument for at man kan bruke flere teknologier</li>
								<li>V√•r erfaring er at man i meste fall t√•ler like mange</li>
								<li>St√∏tteverkt√∏y b√∏r standariseres, men kan godt brukes av flere teknologier</li>
							</ul>
						</aside>
					</section>
				</section>

				<section id="ende-til-ende-testing" data-owner="j√∏ran" data-time="4">
					<section data-background-image="img/curiosity.jpg">
						<div class="header" style="color: #EAA96B">
							<div class="caption"><strike>Vi har‚Ä¶</strike>Vi burde‚Ä¶</div>
							<h2 style="color: inherit;">
								Automatisert testing av alt
							</h2>
						</div>

						<aside class="notes">
							<ul>
								<li>Hit har vi ikke kommet enda</li>
								<li>Viktig √• v√¶re klar over: mikrotjenester drar med seg kompleksitet</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="pain">
						<h2>Verifisere oppf√∏rsel p√• tvers av 4 applikasjoner :(</h2>

						<aside class="notes">
							<ul>
								<li>En forretningsfeature kan gjerne g√• over 3-4 applikasjoner</li>
								<li>Har sine fordeler, men ogs√• utfordringer</li>
								<li>Hvordan vet jeg at jeg ikke brekker funksjonalitet i andre applikasjoner?</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="pain">
						<img src="img/monolithconf.png"/>

						<aside class="notes">
							<ul>
								<li>La folk lese den, g√• gjerne videre</li>
							</ul>
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Kompleksiteten er tilbake</h2>

						<ul>
							<li>Mikrotjenester fjerner ikke kompleksitet</li>
							<li>Mikrotjenester <em>flytter</em> kompleksitet</li>
						</ul>
						<aside class="notes">
							<ul>
								<li>Automatisert testing er vanskelig</li>
								<li>Ikke en s√∏lvkule</li>
								<li>V√•r erfaring er likevel at det er verdt det</li>
								<li>Du m√• <b>vokse inn</b>. Store applikasjoner f√∏rst, s√• stadig mindre etterhvert som du l√¶rer</li>
								<li>Det er ok √• taile logger i starten</li>
							</ul>
						</aside>
					</section>
				</section>


				<section data-background="img/the_end.jpg" data-owner="stian" data-time="1">
					<h2 style="background-color: black; padding: 10px;">The end is near</h2>
					<aside class="notes">
						N√• n√¶rmer vi oss slutten! Snart ferdig.
					</aside>
				</section>

				<section id="hovedpoeng" data-owner="j√∏ran" data-time="4">
					<section data-background-image="img/conclusion.jpg">
						<h2 style="background-color: black; padding: 10px;">Konklusjonen</h2>

						<aside class="notes">
							Pek <b>tilbake til konklusjonen</b> vi teasa med tidligere
						</aside>
					</section>

					<section data-slide-type="poeng">
						<h2>Fokuser p√• smidighet</h2>
						<ul>
							<li>‚Ä¶ og gj√∏r √©n forbedring om gangen.</li>
							<li class="fragment">L√∏s problemer n√•r du har dem</li>
							<li class="fragment">‚Ä¶og gj√∏r ting enkelt!</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Jobben til IT er √• l√∏se behov!</li>
								<li>Du kan ikke "implementere DevOps" eller "lage mikrotjenester".</li>
								<li>M√• vokse frem organisk gjennom at et ansvarliggjort team</li>
								<li>Teamet kjenner p√• smerter og har tillit nok til √• lage l√∏sninger.</li>
								<li>Ikke bygg platform for √• bygge platform!</li>
							</ul>
						</aside>
					</section>

					<!--
					<section id="oppsummering" data-slide-type="poeng">
						<h2 style="margin-bottom: 10px;">Oppsummering</h2>
						<ol id="summary-list">

						</ol>

						<aside class="notes">
							<ul>
								<li>Dette er en sm√∏rbr√∏dliste!</li>
								<li>Vi har bygd sten for sten</li>
								<li>J√∏ran har v√¶rt p√• workshop med Sam Newman om mikrotjenester i Thoughtworks</li>
								<li>Interessant at det nesten var som √• krysse av en komplett liste over vi har gjort</li>
								<li>‚Ä¶ noen forskjeller: vi gj√∏r ikke service discovery (ikke cloud), s√• langt ikke sentral config (p√• vei)</li>
							</ul>
						</aside>
					</section>
					-->
				</section>

				<section data-time="5">
					<h1>Sp√∏rsm√•l?</h1>
					<div style="font-size: 100px">üç∫</div>

					<aside class="notes">
						Sp√∏rsm√•l? Vi blir st√•ende ved scenen etterp√• ‚Äì eller med en √∏l p√• BEKK-standen utover kvelden
					</aside>
				</section>

				<section data-background="img/bekk.jpg" style="background: black">
					<h1>Takk for oss!</h1>
					<div style="clear:both"></div>

					<div style="width: 49%; float: left;">
						<img src="img/bekk-stian.png">
						<p>
						Stian Mathiassen<br/>
						stian.mathiassen@bekk.no
						</p>
					</div>
					<div style="width: 49%; float: left;">
						<img src="img/bekk-joran.png">
						<p>
						J√∏ran Vagnby Lillesand<br/>
							joran.lillesand@bekk.no
						</p>
					</div>
					<img src="img/bekk_logo_transp.png" style="background-color: black; height: 25%; width: 25%;">
				</section>

			</div>

		</div>

		<script src="lib/js/underscore-min.js"></script>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			var slideTypeToBgImage = {
				tabbe: 'img/pain.jpg', // http://www.oxfordtoday.ox.ac.uk/features/pain-always-real
				smerte: 'img/pain.jpg',
				poeng: 'img/idea.jpg' // http://images.huffingtonpost.com/2015-01-20-IdeasMakeorBreakYourBusiness.jpg
				//visdomsord: '',
			};

			_.chain(document.getElementsByTagName('section'))
				.filter(function(e) { return e.dataset['slideType']; })
				.filter(function(e) { return slideTypeToBgImage[e.dataset['slideType']]; })
				.each(function(e) {
					e.dataset['background'] = slideTypeToBgImage[e.dataset['slideType']];
					e.style.backgroundColor = 'rgba(0, 0, 0, 0.75)';
				});

			// Add speaker notes to all slides
			_.chain(document.getElementsByTagName("section"))
				.filter(function(e) { return _.isEmpty(e.getElementsByTagName("section"))})
				.filter(function(e) { return _.isEmpty(e.querySelectorAll("aside.notes"))})
				.forEach(function(e) {
					var notes = document.createElement("aside");
					notes.className = "notes";
					e.appendChild(notes);
				});

			// Add owner to all speaker notes
			_.chain(document.getElementsByTagName("section"))
				.filter(function(e) { return e.dataset.owner })
				.each(function(e) { _.each(e.querySelectorAll("aside.notes"), function(n) {
					n.dataset.owner = e.dataset.owner;
				})
			});

			// Add next owner of next slide to notes
			_.chain(document.querySelectorAll("aside.notes"))
				.reduce(function(prev, next) {
					prev.dataset.nextowner = next.dataset.owner;
					return next;
				});

			_.chain(document.querySelectorAll("section"))
				.filter(function(e) { return e.parentElement.nodeName !== "SECTION" })
				.reduce(function(t, e) {
					if (e.dataset && e.dataset['time']) {
						t.timing = t.next;
						t.next = t.timing + parseFloat(e.dataset['time']);
					}
					e.dataset['next'] = t.next;
					e.dataset['timing'] = t.timing;
					return t;
				}, { timing: 0, next: 0 });

			var showAsTimeInMin = function(t) {
				t = parseFloat(t);
				var min = Math.floor(t);
				var sek = ((t % 1) * 60) + '';

				return min + ":" + (sek.length === 1 ? "0" + sek : sek);
			};

			_.chain(document.querySelectorAll("section"))
				.filter(function(e) { return e.dataset.timing; })
				.each(function(e) { _.each(e.querySelectorAll("aside.notes"), function(n) {
					var el = document.createElement("div");

					el.style.position = "absolute";
					el.style.right = "0";
					el.style.top = "1.6em";
					el.style.height = "2em";
					el.style.width = "50%";
					el.style.zIndex = 100;
					el.style.textAlign = "right";
					el.style.padding = "22px";
					el.style.fontSize = "1.6em";

					el.textContent = showAsTimeInMin(e.dataset.timing) + " - " + showAsTimeInMin(e.dataset.next);

					n.insertBefore(el, n.firstChild);
				})
			});

			var people = {
				stian: "../../img/hovercat.jpg",
				'j√∏ran': "../../img/lillesand.jpeg"
			};

			_.chain(document.querySelectorAll("aside.notes"))
				.each(function(e) {
					var current = document.createElement("img");
					var next = document.createElement("img");

					var size = 4;

					current.style.position = "fixed";
					current.style.right = size + "em";
					current.style.bottom = "0em";
					current.style.height = size + "em";
					current.style.width = size + "em";
					current.style.zIndex = 100;

					next.style.position = "fixed";
					next.style.right = "0em";
					next.style.bottom = "0em";
					next.style.height = size + "em";
					next.style.width = size + "em";
					next.style.zIndex = 100;

					current.src = people[e.dataset.owner];
					next.src = people[e.dataset.nextowner];

					if (e.dataset.owner !== e.dataset.nextowner) {
						e.appendChild(current);
					}
					e.appendChild(next);
			});

			var summary = document.querySelector('#summary-list');
			if (summary) {
				_.chain(document.querySelectorAll('section[data-summary]'))
						.each(function(e) {
							summary.innerHTML += ('<li class="fragment">' + e.dataset.summary + '</li>');
						});
			}

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

			_.toArray(document.querySelectorAll("video"))[1].playbackRate = 4.0;


		</script>


	</body>
</html>
